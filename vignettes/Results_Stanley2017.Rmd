---
title: "Results: Stanley 2017"
author: František Bartoš
output: html_document
vignette: >
  %\VignetteIndexEntry{Results: Stanley (2017)}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
# Local/Remote pathing with nested child paths is extremely buggy. This function makes sure that all paths are properly set
child_path <- function(x) {
  # Try to get the package name safely
  pkg <- tryCatch(utils::packageName(), error = function(e) NULL)
  if (is.null(pkg) || length(pkg) != 1 || is.na(pkg) || !nzchar(pkg)) {
    pkg <- tryCatch(desc::desc_get("Package")[[1]], error = function(e) NA_character_)
  }
  if (is.null(pkg) || is.na(pkg) || !nzchar(pkg)) {
    pkg <- basename(rprojroot::find_package_root_file())
  }

  # First try the installed vignettes dir (works when pkgdown builds from an installed copy)
  p <- tryCatch(system.file("vignettes", x, package = pkg), error = function(e) "")
  if (!is.character(p) || length(p) != 1 || !nzchar(p)) p <- ""

  # Fallback to the source tree
  if (!nzchar(p)) {
    p <- file.path(rprojroot::find_package_root_file(), "vignettes", x)
  }

  normalizePath(p, winslash = "/", mustWork = TRUE)
}

```

```{r, include = FALSE}
dgm_names    <- "Stanley2017"
common_scale <- FALSE
```

```{r, child = child_path("_results-raincloudplot.Rmd")}
```
```{r, child = child_path("_results-functions.Rmd")}
```

## Complete Results

```{r, child = child_path("_results-main.Rmd")}
```

```{r, include = FALSE}
common_scale <- TRUE
```

## Subset: Standardized Mean Differences 

### Average Performance {.tabset .tabset-fade .tabset-pills}

```{r, include = FALSE}
# compute average performance
this_tables_conditional <- make_table_summary(results_conditional[results_conditional$condition_id %in% conditions$condition_id[conditions$environment == "Cohens_d"],], common_scale = TRUE)
this_tables_replacement <- make_table_summary(results_replacement[results_conditional$condition_id %in% conditions$condition_id[conditions$environment == "Cohens_d"],], common_scale = TRUE)

# add ranks
this_rankings_conditional <- make_rank_summary(this_tables_conditional)
this_rankings_replacement <- make_rank_summary(this_tables_replacement)
```
```{r, child = child_path("_results-tabs-tables.Rmd")}
```


### By-Condition Performance (Conditional) {.tabset .tabset-fade .tabset-pills}

The results below are conditional on convergence. 
Note that the methods might differ in convergence rate and are therefore not compared on the same data sets.

```{r, include = FALSE}
  this_results <- results_conditional[results_conditional$condition_id %in% conditions$condition_id[conditions$environment == "Cohens_d"],]
```
```{r, child = child_path("_results-tabs-figures.Rmd")}
```


### By-Condition Performance (Replacement) {.tabset .tabset-fade .tabset-pills}

The results below incorporate method replacement to handle non-convergence. If a method fails to converge, its results are replaced with the results from a simpler method This emulates what a data analyst may do in practice in case a method does not converge. However, note that these results do not correspond to "pure" method performance as they might combine multiple different methods. See TODO for details of the method replacement specification.

```{r, include = FALSE}
  this_results <- results_replacement[results_conditional$condition_id %in% conditions$condition_id[conditions$environment == "Cohens_d"],]
```
```{r, child = child_path("_results-tabs-figures.Rmd")}
```


## Subset: Log Odd Rations

### Average Performance {.tabset .tabset-fade .tabset-pills}

```{r, include = FALSE}
# compute average performance
this_tables_conditional <- make_table_summary(results_conditional[results_conditional$condition_id %in% conditions$condition_id[conditions$environment == "LogOR"],], common_scale = TRUE)
this_tables_replacement <- make_table_summary(results_replacement[results_conditional$condition_id %in% conditions$condition_id[conditions$environment == "LogOR"],], common_scale = TRUE)

# add ranks
this_rankings_conditional <- make_rank_summary(this_tables_conditional)
this_rankings_replacement <- make_rank_summary(this_tables_replacement)
```
```{r, child = child_path("_results-tabs-tables.Rmd")}
```


### By-Condition Performance (Conditional) {.tabset .tabset-fade .tabset-pills}

The results below are conditional on convergence. 
Note that the methods might differ in convergence rate and are therefore not compared on the same data sets.

```{r, include = FALSE}
  this_results <- results_conditional[results_conditional$condition_id %in% conditions$condition_id[conditions$environment == "LogOR"],]
```
```{r, child = child_path("_results-tabs-figures.Rmd")}
```


### By-Condition Performance (Replacement) {.tabset .tabset-fade .tabset-pills}

The results below incorporate method replacement to handle non-convergence. If a method fails to converge, its results are replaced with the results from a simpler method This emulates what a data analyst may do in practice in case a method does not converge. However, note that these results do not correspond to "pure" method performance as they might combine multiple different methods. See TODO for details of the method replacement specification.

```{r, include = FALSE}
  this_results <- results_replacement[results_conditional$condition_id %in% conditions$condition_id[conditions$environment == "LogOR"],]
```
```{r, child = child_path("_results-tabs-figures.Rmd")}
```



```{r, child = child_path("_results-sessionInfo.Rmd")}
```

