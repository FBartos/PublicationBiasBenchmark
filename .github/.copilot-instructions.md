# PublicationBiasBenchmark R Package

## Project Overview
This R package provides benchmarking functionality for publication bias simulation studies. The package implements a modular framework for comparing different methods across various data generating mechanisms (DGMs).

## Core Architecture

### Main Components
1. **DGM Functions**: Generate simulated datasets from specified environments
2. **Method Functions**: Apply statistical methods to datasets and return estimates
3. **Results**: Precomputed results for all methods and DGMs stored in a standardized format

### Design Patterns
- Both DGM and method functions should use S3 classes for easy extensibility
- Each function type should have a generic interface with specific implementations
- New DGMs and methods should be easily added without modifying core code

## Key Functions

### DGM() Functions
- Generate data from simulation environments with configurable parameters
- Should return standardized data structures
- Examples: `simulate_dgm("Carter2019", settings = list(...))` and `simulate_dgm("Bom2019", settings = list(...))`
Use the following structure for the output:
```r
data.frame(
    yi          = effect_sizes,
    sei         = standard_errors,
    ...         # any other relevant columns
)
```
- The dgm is implemented via an S3 generic function `dgm.`, which dispatches to specific DGM implementations based on the first argument.
- Each dgm must have a dictionary with `setting_id` variable corresponding to prespecified settings that can be used to generate the data
(if settings = numeric, the corresponding `setting_id` will be used to generate the data). The list of settings must be implemented via
the `dgm_settings.` S3 method.
- Each dgm must have a settings validator function to check the validity of the settings implemented via the `validate_dgm_setting.` S3 method.

### method() Functions  
- Apply statistical methods to generated datasets
- Return estimates in standardized format
- Examples: `method("PETPEESE", data, settings = list(...))` and `method("3PSM", data, settings = list(...))`
- Always implement error handling for convergence issues
Use the following structure for the output:
```r
data.frame(
    method         = "method_name",
    estimate       = estimate_value,
    standard_error = standard_error,             # if applicable (else NA)
    ci_lower       = lower_confidence_interval,  # if applicable (else NA)
    ci_upper       = upper_confidence_interval,  # if applicable (else NA)
    p_value        = p_value,                    # if applicable (else NA)
    BF             = bayes_factor,               # if applicable (else NA)
    convergence    = convergence_status,
    note           = NA,                         # additional note (e.g., convergence issues message) 
    ...         # any other output information
)
```
- Each dgm has documentation that describes the settings and their meaning.


## File Structure
- `R/dgm-*.R`: Data generating mechanism implementations
- `R/method-*.R`: Statistical method implementations  
- `tests/`: Unit tests for all functions
- `vignettes/`: Usage examples and documentation

## Coding Conventions
- Use snake_case for function names
- Include comprehensive documentation with roxygen2
- Include examples in function documentation
